{"ast":null,"code":"// AskQuestion.js\n/*\r\nThis is the AskQuestion component. It is responsible for handling the user input and sending the question to the backend.\r\n\r\n*/import React,{useState,useEffect}from'react';import send_btn from'./send.png';import{useQuestionContext}from'./QuestionContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AskQuestion=_ref=>{let{onAskQuestion,filename,userImage}=_ref;const[question,setQuestion]=useState('');const{addQuestion}=useQuestionContext();const handleQuestionChange=event=>{setQuestion(event.target.value);};const handleKeyDown=event=>{if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();handleAskQuestion();}};useEffect(()=>{console.log('Question:',question);},[question]);useEffect(()=>{console.log('Filename:',filename);},[filename]);const handleAskQuestion=async()=>{if(question){// Log the question and filename to console for testing\nconsole.log('Question:',question);console.log('Filename:',filename);};if(question&&filename){try{// Make a POST request to the backend\nconst response=await fetch('http://localhost:8000/ask-question/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question,pdf_metadata:{filename}})});console.log('pdf_metadata:',{filename});if(response.ok){const result=await response.json();addQuestion(question,result.answer);onAskQuestion(result.answer);setQuestion('');}else{// Handle the error response\nalert('Failed to ask the question:',response.statusText);console.error('Failed to ask the question:',response.statusText);}}catch(error){alert('Incorrect file:',error);console.error('Error while asking the question:',error);}}else{// Display an error message for no question entered\nalert('Please enter a question.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"ask-question-container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"text-box\",placeholder:\"Send a message...\",value:question,onChange:handleQuestionChange,onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(\"button\",{className:\"ask-question-button\",onClick:handleAskQuestion,children:/*#__PURE__*/_jsx(\"img\",{className:\"ask-question-button\",src:send_btn,alt:\"sendbtn\"})})]})});};export default AskQuestion;","map":{"version":3,"names":["React","useState","useEffect","send_btn","useQuestionContext","jsx","_jsx","jsxs","_jsxs","AskQuestion","_ref","onAskQuestion","filename","userImage","question","setQuestion","addQuestion","handleQuestionChange","event","target","value","handleKeyDown","key","shiftKey","preventDefault","handleAskQuestion","console","log","response","fetch","method","headers","body","JSON","stringify","pdf_metadata","ok","result","json","answer","alert","statusText","error","className","children","id","placeholder","onChange","onKeyDown","onClick","src","alt"],"sources":["C:/Users/HP/Downloads/pdf-chat-application-main/pdf-chat-application-main/PDF_application/pdf-question-app/src/AskQuestion.js"],"sourcesContent":["// AskQuestion.js\r\n/*\r\nThis is the AskQuestion component. It is responsible for handling the user input and sending the question to the backend.\r\n\r\n*/\r\nimport React, { useState, useEffect } from 'react';\r\nimport send_btn from './send.png';\r\nimport { useQuestionContext } from './QuestionContext';\r\n\r\nconst AskQuestion = ({ onAskQuestion, filename, userImage }) => {\r\n    const [question, setQuestion] = useState('');\r\n    const { addQuestion } = useQuestionContext();\r\n\r\n    const handleQuestionChange = (event) => {\r\n        setQuestion(event.target.value);\r\n    };\r\n    const handleKeyDown = (event) => {\r\n        if (event.key === 'Enter' && !event.shiftKey) {\r\n            event.preventDefault();\r\n            handleAskQuestion();\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        console.log('Question:', question);\r\n    }, [question]);\r\n\r\n    useEffect(() => {\r\n        console.log('Filename:', filename);\r\n    }, [filename]);\r\n\r\n    const handleAskQuestion = async () => {\r\n        \r\n        if (question) {\r\n            // Log the question and filename to console for testing\r\n            console.log('Question:', question);\r\n            console.log('Filename:', filename);};\r\n\r\n        if (question && filename) {\r\n            try {\r\n\r\n                // Make a POST request to the backend\r\n                const response = await fetch('http://localhost:8000/ask-question/', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({ \r\n                        question,\r\n                        pdf_metadata: {\r\n                            filename,\r\n                        },\r\n                    }),\r\n                });\r\n                \r\n                console.log('pdf_metadata:', { filename });\r\n                if (response.ok) {\r\n                    const result = await response.json();\r\n                    addQuestion(question, result.answer);\r\n                    onAskQuestion(result.answer);\r\n                    setQuestion(''); \r\n\r\n                } else {\r\n                    // Handle the error response\r\n                    alert('Failed to ask the question:', response.statusText);\r\n                    console.error('Failed to ask the question:', response.statusText);\r\n                }\r\n            } catch (error) {\r\n                alert('Incorrect file:', error);\r\n                console.error('Error while asking the question:', error);\r\n            }\r\n        } else {\r\n            // Display an error message for no question entered\r\n            alert('Please enter a question.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='ask-question-container'>\r\n            <div>\r\n                <textarea id='text-box' placeholder='Send a message...' value={question} onChange={handleQuestionChange}  onKeyDown={handleKeyDown}></textarea>\r\n                <button className='ask-question-button' onClick={handleAskQuestion}><img className='ask-question-button' src={send_btn} alt='sendbtn'></img></button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AskQuestion;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}